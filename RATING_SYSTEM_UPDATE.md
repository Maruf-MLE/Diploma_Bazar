# রেটিং সিস্টেম আপডেট

এই আপডেটে বই-চাপা-বাজার প্লাটফর্মে রেটিং সিস্টেম আপডেট করা হয়েছে। এখন প্রোফাইল পেজে সঠিকভাবে রেটিং দেখানো হবে।

## আপডেটের বিবরণ

1. **প্রোফাইল টেবিলে নতুন কলাম**
   - `avg_rating`: ব্যবহারকারীর গড় রেটিং (0-5 স্কেল)
   - `review_count`: মোট রিভিউ সংখ্যা

2. **ডাটাবেস ট্রিগার**
   - যখনই কোনো নতুন রিভিউ যোগ হবে, প্রোফাইল টেবিলে রেটিং আপডেট হবে
   - রিভিউ আপডেট বা ডিলিট করলেও প্রোফাইল আপডেট হবে

3. **ইউজার ইন্টারফেস আপডেট**
   - প্রোফাইল পেজে সঠিক রেটিং দেখানো হবে
   - ইউজার প্রোফাইল পেজে সঠিক রেটিং দেখানো হবে

## মাইগ্রেশন স্ক্রিপ্ট

এই আপডেট ইনস্টল করতে নিম্নলিখিত কমান্ডগুলি চালান:

```bash
# প্রথমে reviews টেবিল আছে কিনা নিশ্চিত করুন
npm run create:reviews

# রেটিং সিস্টেম আপডেট করুন
npm run update:rating

# প্রোফাইল রেটিং আপডেট করুন
npm run update:profile-rating-migration
```

## ট্রাবলশুটিং

যদি প্রোফাইল পেজে রেটিং দেখা না যায়, তাহলে নিম্নলিখিত কমান্ডগুলি চালান:

```bash
# শুধু প্রোফাইল রেটিং আপডেট করুন
npm run update:profile-ratings
```

## টেকনিক্যাল বিবরণ

1. **ডাটাবেস স্কিমা আপডেট**
   - `profiles` টেবিলে `avg_rating` এবং `review_count` কলাম যোগ করা হয়েছে
   - `reviews` টেবিলে ট্রিগার যোগ করা হয়েছে

2. **রেটিং ক্যালকুলেশন**
   - গড় রেটিং = সমস্ত রেটিংয়ের যোগফল / রিভিউ সংখ্যা
   - রিভিউ সংখ্যা = সমস্ত রিভিউ গণনা

3. **ফ্রন্টএন্ড আপডেট**
   - `ProfilePage.tsx` এবং `UserProfilePage.tsx` আপডেট করা হয়েছে 